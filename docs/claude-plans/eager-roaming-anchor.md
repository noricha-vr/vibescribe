# コマンドラインオプションの追加

## 概要

`main.py` にコマンドラインオプションを追加する。

- `-d` / `--daemon`: バックグラウンドで実行
- `-h` / `--help`: ヘルプを表示

## 現状

- コマンドライン引数の処理なし
- rumpsベースのメニューバーアプリ（`app.run()` でイベントループ開始）
- デーモン化はlaunchctl任せ

## 実装方針

### 変更ファイル

| ファイル | 変更内容 |
|----------|----------|
| `main.py` | argparse追加、デーモン化処理追加 |

### 実装詳細

1. **argparse でコマンドライン引数を追加**
   ```python
   parser = argparse.ArgumentParser(description="VoiceCode - 音声入力ツール")
   parser.add_argument("-d", "--daemon", action="store_true", help="バックグラウンドで実行")
   ```

2. **デーモン化処理**（`os.fork()` を使用）
   - 親プロセスを終了し、子プロセスで継続
   - 標準入出力をログファイルにリダイレクト
   - 作業ディレクトリを `/` に変更（オプション）
   - 新しいセッションを作成（`os.setsid()`）

3. **ログ出力先**
   - `~/.voicecode/voicecode.log` に出力（既存のログファイル）

## 完了条件

### ユーザー価値
- ユーザーは `-d` オプションでターミナルから切り離してアプリを起動できる
- ターミナルを閉じてもアプリが継続動作する

### 受け入れ確認の手順
- [ ] `uv run python main.py -d` を実行し、即座にプロンプトに戻ることを確認
- [ ] メニューバーにVoiceCodeアイコンが表示されることを確認
- [ ] ターミナルを閉じてもアプリが継続動作することを確認
- [ ] `~/.voicecode/voicecode.log` にログが出力されることを確認
- [ ] `uv run python main.py -h` でヘルプが表示されることを確認

### 技術的完了条件
- [ ] 既存のテストがパスする
